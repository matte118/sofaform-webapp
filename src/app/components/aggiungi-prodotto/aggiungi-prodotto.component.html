<div class="add-product-container">
  <p-toast></p-toast>

  <!-- Overlay di caricamento durante il salvataggio -->
  <div *ngIf="isSavingProduct" class="saving-overlay">
    <div class="saving-content">
      <p-progressSpinner [style]="{ width: '80px', height: '80px' }" strokeWidth="4" fill="transparent"
        animationDuration="1.5s"></p-progressSpinner>
      <h3>Salvataggio in corso...</h3>
      <small>Non chiudere la pagina</small>
    </div>
  </div>

  <!-- Contenuto principale (disabilitato durante il salvataggio) -->
  <div [class.disabled-content]="isSavingProduct">
    <p-card header="Aggiungi Nuovo Prodotto" class="p-mb-4">
      <p-steps [model]="steps" [(activeIndex)]="currentStep" [readonly]="true" class="p-mb-4"></p-steps>

      <br />
      <br />

      <form class="p-fluid p-formgrid p-grid">
        <!-- Step 1: Informazioni Prodotto -->
        <ng-container *ngIf="currentStep === 0">
          <div class="p-field p-col-12 p-md-6">
            <label for="productName">Nome Prodotto <span class="required-field">*</span></label>
            <input id="productName" pInputText [(ngModel)]="newSofaProduct.name" name="nome" required
              placeholder="Inserisci il nome del prodotto"
              [class.ng-invalid]="shouldShowProductFieldError(newSofaProduct.name)" />
            <small *ngIf="shouldShowProductFieldError(newSofaProduct.name)" class="p-error">
              Campo obbligatorio
            </small>
          </div>

          <div class="p-field p-col-12 p-md-6">
            <label>Immagine Prodotto</label>
            <div class="image-upload-section">
              <p-fileUpload *ngIf="!imagePreview && !isUploading" mode="basic" name="productImage" accept="image/*"
                [maxFileSize]="5000000" (onSelect)="onFileSelect($event)" chooseLabel="Seleziona Immagine"
                [auto]="false" styleClass="transparent-upload-btn">
              </p-fileUpload>


              <!-- Preview dell'immagine -->
              <div *ngIf="imagePreview && !isUploading" class="image-preview-container">
                <img [src]="imagePreview" alt="Anteprima" class="image-preview" />
                <div class="image-actions">
                  <p-button icon="pi pi-times" (onClick)="removeImage()" styleClass="p-button-danger p-button-sm"
                    pTooltip="Rimuovi immagine"></p-button>
                </div>
              </div>

              <!-- Upload in corso -->
              <div *ngIf="isUploading" class="upload-progress-container">
                <div class="upload-spinner-section">
                  <p-progressSpinner [style]="{ width: '50px', height: '50px' }" strokeWidth="4" fill="transparent"
                    animationDuration="1s"></p-progressSpinner>
                  <span class="upload-text">Caricamento immagine...</span>
                </div>
              </div>
            </div>
          </div>

          <div class="p-field p-col-12">
            <label for="productDescription">Descrizione</label>
            <textarea id="productDescription" pInputTextarea [(ngModel)]="newSofaProduct.description" name="descrizione"
              rows="5" placeholder="Inserisci una descrizione del prodotto"></textarea>
          </div>

          <!-- Pulsanti per campi opzionali in due colonne -->
          <div class="p-field p-col-12">
            <label>Scheda Tecnica:</label>
            <div class="optional-fields-grid">
              <!-- Seduta -->
              <div class="optional-field-cell">
                <p-button [label]="'Seduta'" [icon]="newSofaProduct.seduta ? 'pi pi-trash' : ''" (onClick)="
                    newSofaProduct.seduta
                      ? (newSofaProduct.seduta = '')
                      : (showSedutaDialog = true)
                  " [styleClass]="
                    newSofaProduct.seduta
                      ? 'gradient-filled optional-btn'
                      : 'p-button-outlined optional-btn'
                  " pTooltip="{{
                    newSofaProduct.seduta
                      ? 'Rimuovi contenuto'
                      : 'Aggiungi seduta'
                  }}"></p-button>
              </div>
              <!-- Schienale -->
              <div class="optional-field-cell">
                <p-button [label]="'Schienale'" [icon]="newSofaProduct.schienale ? 'pi pi-trash' : ''" (onClick)="
                    newSofaProduct.schienale
                      ? (newSofaProduct.schienale = '')
                      : (showSchienaleDialog = true)
                  " [styleClass]="
                    newSofaProduct.schienale
                      ? 'gradient-filled optional-btn'
                      : 'p-button-outlined optional-btn'
                  " pTooltip="{{
                    newSofaProduct.schienale
                      ? 'Rimuovi contenuto'
                      : 'Aggiungi schienale'
                  }}"></p-button>
              </div>
              <!-- Meccanica -->
              <div class="optional-field-cell">
                <p-button [label]="'Meccanica'" [icon]="newSofaProduct.meccanica ? 'pi pi-trash' : ''" (onClick)="
                    newSofaProduct.meccanica
                      ? (newSofaProduct.meccanica = '')
                      : (showMeccanicaDialog = true)
                  " [styleClass]="
                    newSofaProduct.meccanica
                      ? 'gradient-filled optional-btn'
                      : 'p-button-outlined optional-btn'
                  " pTooltip="{{
                    newSofaProduct.meccanica
                      ? 'Rimuovi contenuto'
                      : 'Aggiungi meccanica'
                  }}"></p-button>
              </div>
              <!-- Materasso -->
              <div class="optional-field-cell">
                <p-button [label]="'Materasso'" [icon]="newSofaProduct.materasso ? 'pi pi-trash' : ''" (onClick)="
                    newSofaProduct.materasso
                      ? (newSofaProduct.materasso = '')
                      : (showMaterassoDialog = true)
                  " [styleClass]="
                    newSofaProduct.materasso
                      ? 'gradient-filled optional-btn'
                      : 'p-button-outlined optional-btn'
                  " pTooltip="{{
                    newSofaProduct.materasso
                      ? 'Rimuovi contenuto'
                      : 'Aggiungi materasso'
                  }}"></p-button>
              </div>
            </div>
          </div>
        </ng-container>

        <!-- Step 2: Varianti -->
        <ng-container *ngIf="currentStep === 1">
          <div class="p-field p-col-12">
            <h3>Varianti del Prodotto</h3>

            <div class="p-grid p-nogutter p-align-end">
              <div class="p-field p-col-12 p-md-4">
                <p-floatLabel>
                  <input id="variantName" pInputText [(ngModel)]="newVariant.longName" name="nomeVariante" required
                    [class.ng-invalid]="shouldShowVariantFieldError(newVariant.longName)" />
                  <label>Nome Variante</label>
                </p-floatLabel>
                <small *ngIf="shouldShowVariantFieldError(newVariant.longName)" class="p-error">
                  Il nome della variante Ã¨ obbligatorio
                </small>
              </div>

              <div class="p-field p-col-12 p-md-2">
                <p-floatLabel>
                  <p-inputNumber id="seatsCount" [(ngModel)]="newVariant.seatsCount" name="postiSeduta"></p-inputNumber>
                  <label>Numero Posti</label>
                </p-floatLabel>
              </div>

              <div class="p-field p-col-12 p-md-2">
                <p-floatLabel>
                  <p-inputNumber id="mattressWidth" [(ngModel)]="newVariant.mattressWidth"
                    name="larghezzaMaterasso"></p-inputNumber>
                  <label>Larghezza (cm)</label>
                </p-floatLabel>
              </div>

              <div class="p-field p-col-12 p-md-1">
                <p-button
                  [label]="editingVariantIndex >= 0 ? 'Aggiorna' : 'Aggiungi'" (onClick)="addVariant()"
                  [disabled]="!newVariant.longName.trim()"
                  [styleClass]="editingVariantIndex >= 0 ? 'p-button-success' : 'variant-add-btn'">
                </p-button>

              </div>
            </div>

            <p-table [value]="variants" *ngIf="variants.length" [paginator]="true" [rows]="5" class="p-mt-3">
              <ng-template pTemplate="header">
                <tr>
                  <th>Nome</th>
                  <th>Posti</th>
                  <th>Larghezza</th>
                  <th>Azioni</th>
                </tr>
              </ng-template>
              <ng-template pTemplate="body" let-variant let-i="rowIndex">
                <tr>
                  <td>{{ variant.longName }}</td>
                  <td>{{ variant.seatsCount || "N/A" }}</td>
                  <td>
                    {{
                    variant.mattressWidth
                    ? variant.mattressWidth + " cm"
                    : "N/A"
                    }}
                  </td>
                  <td>
                    <p-button icon="pi pi-pencil" (onClick)="editVariant(i)"
                      styleClass="p-button-text p-button-sm"></p-button>
                    <p-button icon="pi pi-trash" (onClick)="deleteVariant(i)"
                      styleClass="p-button-danger p-button-text p-button-sm"></p-button>
                  </td>
                </tr>
              </ng-template>
            </p-table>
          </div>
        </ng-container>

        <!-- Step 3: Componenti -->
        <ng-container *ngIf="currentStep === 2">
          <div class="p-field p-col-12">
            <h3>Componenti</h3>

            <!-- Variant selection section -->
            <div class="p-field p-mb-4">
              <label class="p-d-block p-mb-2">Seleziona una variante per configurare i componenti:</label>
              <div class="p-grid">
                <div class="p-col-12 p-md-6">
                  <p-dropdown [options]="variants" [(ngModel)]="selectedVariant" optionLabel="longName"
                    placeholder="Scegli una variante" (onChange)="selectVariantForComponents($event.value)"
                    [style]="{'width':'100%'}"></p-dropdown>
                </div>
              </div>
            </div>

            <!-- Message when no variant selected -->
            <div *ngIf="!selectedVariant" class="p-text-center p-py-5">
              <i class="pi pi-info-circle" style="font-size: 2rem; color: var(--primary-color);"></i>
              <p class="p-mt-3">Seleziona una variante per configurare i componenti.</p>
            </div>

            <!-- -------------------------
            Sezione "Componenti Speciali"
            (aggiungi-prodotto.component.html)
            ------------------------- -->
            <div *ngIf="selectedVariant" class="special-components p-mt-4">

              <!-- Fusto -->
              <div class="p-field p-grid">
                <label class="p-col-12 p-md-2">Fusto <span class="required-field">*</span></label>
                <div class="p-col-12 p-md-4">
                  <p-dropdown [options]="getComponentsByType('fusto') || []" [(ngModel)]="selectedFusto"
                    optionLabel="name" placeholder="Seleziona fusto" [showClear]="true"
                    [disabled]="(getComponentsByType('fusto') || []).length === 0"
                    (onChange)="onComponentSelected('fusto', $event.value)" name="fusto" filter="true">
                    <ng-template let-item pTemplate="item">
                      {{ formatComponentName(item) }}
                    </ng-template>
                    <ng-template let-selectedItem pTemplate="selectedItem">
                      {{ formatComponentName(selectedItem) }}
                    </ng-template>
                  </p-dropdown>
                  <small *ngIf="(getComponentsByType('fusto') || []).length === 0" class="p-error">
                    Nessun componente di tipo fusto disponibile
                  </small>
                </div>
              </div>

              <!-- Gomma -->
              <div class="p-field p-grid">
                <label class="p-col-12 p-md-2">Gomma <span class="required-field">*</span></label>
                <div class="p-col-12 p-md-4">
                  <p-dropdown [options]="getComponentsByType('gomma') || []" [(ngModel)]="selectedGomma"
                    optionLabel="name" placeholder="Seleziona gomma" [showClear]="true"
                    [disabled]="(getComponentsByType('gomma') || []).length === 0"
                    (onChange)="onComponentSelected('gomma', $event.value)" name="gomma" filter="true">
                    <ng-template let-item pTemplate="item">
                      {{ formatComponentName(item) }}
                    </ng-template>
                    <ng-template let-selectedItem pTemplate="selectedItem">
                      {{ formatComponentName(selectedItem) }}
                    </ng-template>
                  </p-dropdown>
                  <small *ngIf="(getComponentsByType('gomma') || []).length === 0" class="p-error">
                    Nessun componente di tipo gomma disponibile
                  </small>
                </div>
              </div>

              <!-- Rete -->
              <div class="p-field p-grid">
                <label class="p-col-12 p-md-2">Rete <span class="required-field">*</span></label>
                <div class="p-col-12 p-md-4">
                  <p-dropdown [options]="getComponentsByType('rete') || []" [(ngModel)]="selectedRete"
                    optionLabel="name" placeholder="Seleziona rete" [showClear]="true"
                    [disabled]="(getComponentsByType('rete') || []).length === 0"
                    (onChange)="onComponentSelected('rete', $event.value)" name="rete" filter="true">
                    <ng-template let-item pTemplate="item">
                      {{ formatComponentName(item) }}
                    </ng-template>
                    <ng-template let-selectedItem pTemplate="selectedItem">
                      {{ formatComponentName(selectedItem) }}
                    </ng-template>
                  </p-dropdown>
                  <small *ngIf="(getComponentsByType('rete') || []).length === 0" class="p-error">
                    Nessun componente di tipo rete disponibile
                  </small>
                </div>
              </div>

              <!-- Piedini + QuantitÃ  -->
              <div class="p-field p-grid">
                <label class="p-col-12 p-md-2">Piedini (min 2) <span class="required-field">*</span></label>
                <div class="p-col-12 p-md-5 p-d-flex p-jc-between">
                  <div class="p-mr-2" style="width: 70%">
                    <p-dropdown [options]="getComponentsByType('piedini')" [(ngModel)]="selectedPiedini"
                      optionLabel="name" placeholder="Scegli piedini" [showClear]="true"
                      [disabled]="getComponentsByType('piedini').length === 0" [style]="{width: '100%'}"
                      (onChange)="onComponentSelected('piedini', $event.value)" name="piedini" filter="true">
                      <ng-template let-item pTemplate="item">
                        {{ formatComponentName(item) }}
                      </ng-template>
                      <ng-template let-selectedItem pTemplate="selectedItem">
                        {{ formatComponentName(selectedItem) }}
                      </ng-template>
                    </p-dropdown>
                    <small *ngIf="getComponentsByType('piedini').length === 0" class="p-error">
                      Nessun componente di tipo piedini disponibile
                    </small>
                  </div>
                  <div style="width: 28%">
                    <p-dropdown [options]="piediniQuantityOptions" [(ngModel)]="piediniQty" placeholder="QuantitÃ "
                      [style]="{width: '100%'}" [disabled]="getComponentsByType('piedini').length === 0"
                      name="piediniQty"></p-dropdown>
                  </div>
                </div>
              </div>

              <!-- Materasso -->
              <div class="p-field p-grid">
                <label class="p-col-12 p-md-2">Materasso <span class="required-field">*</span></label>
                <div class="p-col-12 p-md-4">
                  <p-dropdown [options]="getComponentsByType('materasso') || []" [(ngModel)]="selectedMaterasso"
                    optionLabel="name" placeholder="Seleziona materasso" [showClear]="true"
                    [disabled]="(getComponentsByType('materasso') || []).length === 0"
                    (onChange)="onComponentSelected('materasso', $event.value)" name="materasso" filter="true">
                    <ng-template let-item pTemplate="item">
                      {{ formatComponentName(item) }}
                    </ng-template>
                    <ng-template let-selectedItem pTemplate="selectedItem">
                      {{ formatComponentName(selectedItem) }}
                    </ng-template>
                  </p-dropdown>
                  <small *ngIf="(getComponentsByType('materasso') || []).length === 0" class="p-error">
                    Nessun componente di tipo materasso disponibile
                  </small>
                </div>
              </div>

              <!-- Tappezzeria -->
              <div class="p-field p-grid">
                <label class="p-col-12 p-md-2">Tappezzeria</label>
                <div class="p-col-12 p-md-6">
                  <p-multiSelect [options]="getComponentsByType('tappezzeria')" [(ngModel)]="tappezzeriaList"
                    optionLabel="name" placeholder="Scegli tappezzeria"
                    [disabled]="getComponentsByType('tappezzeria').length === 0" name="tappezzeriaList" filter="true">
                    <ng-template let-item pTemplate="item">
                      {{ formatComponentName(item) }}
                    </ng-template>
                    <ng-template let-selectedItem pTemplate="selectedItem">
                      {{ formatComponentName(selectedItem) }}
                    </ng-template>
                  </p-multiSelect>
                  <small *ngIf="getComponentsByType('tappezzeria').length === 0" class="p-error">
                    Nessun componente di tipo tappezzeria disponibile
                  </small>
                </div>
              </div>

              <!-- Ferramenta (multi-select) -->
              <div class="p-field p-grid">
                <label class="p-col-12 p-md-2">Ferramenta</label>
                <div class="p-col-12 p-md-6">
                  <p-multiSelect [options]="getComponentsByType('ferramenta')" [(ngModel)]="ferramentaList"
                    optionLabel="name" placeholder="Scegli ferramenta"
                    [disabled]="getComponentsByType('ferramenta').length === 0" name="ferramentaList" filter="true"></p-multiSelect>
                  <small *ngIf="getComponentsByType('ferramenta').length === 0" class="p-error">
                    Nessun componente di tipo ferramenta disponibile
                  </small>
                </div>
              </div>

              <!-- Imballo -->
              <div class="p-field p-grid">
                <label class="p-col-12 p-md-2">Imballo <span class="required-field">*</span></label>
                <div class="p-col-12 p-md-4">
                  <p-dropdown [options]="getComponentsByType('imballo')" [(ngModel)]="selectedImballo"
                    optionLabel="name" placeholder="Seleziona imballo" [showClear]="true"
                    [disabled]="getComponentsByType('imballo').length === 0"
                    (onChange)="onComponentSelected('imballo', $event.value)" name="imballo" filter="true"></p-dropdown>
                  <small *ngIf="getComponentsByType('imballo').length === 0" class="p-error">
                    Nessun componente di tipo imballo disponibile
                  </small>
                </div>
              </div>

              <!-- Scatola -->
              <div class="p-field p-grid">
                <label class="p-col-12 p-md-2">Scatola <span class="required-field">*</span></label>
                <div class="p-col-12 p-md-4">
                  <p-dropdown [options]="getComponentsByType('scatola')" [(ngModel)]="selectedScatola"
                    optionLabel="name" placeholder="Seleziona scatola" [showClear]="true"
                    [disabled]="getComponentsByType('scatola').length === 0"
                    (onChange)="onComponentSelected('scatola', $event.value)" name="scatola" filter="true"></p-dropdown>
                  <small *ngIf="getComponentsByType('scatola').length === 0" class="p-error">
                    Nessun componente di tipo scatola disponibile
                  </small>
                </div>
              </div>

              <!-- Tela Marchiata -->
              <div class="p-field p-grid">
                <label class="p-col-12 p-md-2">Tela Marchiata</label>
                <div class="p-col-12 p-md-4">
                  <p-dropdown [options]="getComponentsByType('tela_marchiata')" [(ngModel)]="selectedTelaMarchiata"
                    optionLabel="name" placeholder="Seleziona tela marchiata" [showClear]="true"
                    [disabled]="getComponentsByType('tela_marchiata').length === 0"
                    (onChange)="onComponentSelected('tela_marchiata', $event.value)" name="telaMarchiata" filter="true">
                    <ng-template let-item pTemplate="item">
                      {{ formatComponentName(item) }}
                    </ng-template>
                    <ng-template let-selectedItem pTemplate="selectedItem">
                      {{ formatComponentName(selectedItem) }}
                    </ng-template>
                  </p-dropdown>
                  <small *ngIf="getComponentsByType('tela_marchiata').length === 0" class="p-error">
                    Nessun componente di tipo tela marchiata disponibile
                  </small>
                </div>
              </div>

              <!-- Trasporto -->
              <div class="p-field p-grid">
                <label class="p-col-12 p-md-2">Trasporto</label>
                <div class="p-col-12 p-md-4">
                  <p-dropdown [options]="getComponentsByType('trasporto')" [(ngModel)]="selectedTrasporto"
                    optionLabel="name" placeholder="Seleziona trasporto" [showClear]="true"
                    [disabled]="getComponentsByType('trasporto').length === 0"
                    (onChange)="onComponentSelected('trasporto', $event.value)" name="trasporto" filter="true">
                    <ng-template let-item pTemplate="item">
                      {{ formatComponentName(item) }}
                    </ng-template>
                    <ng-template let-selectedItem pTemplate="selectedItem">
                      {{ formatComponentName(selectedItem) }}
                    </ng-template>
                  </p-dropdown>
                  <small *ngIf="getComponentsByType('trasporto').length === 0" class="p-error">
                    Nessun componente di tipo trasporto disponibile
                  </small>
                </div>
              </div>

              <!-- Varie (opzionale) -->
              <div class="p-field p-grid">
                <label class="p-col-12 p-md-2">Varie</label>
                <div class="p-col-12 p-md-6">
                  <p-multiSelect [options]="getComponentsByType('varie')" [(ngModel)]="varieList" optionLabel="name"
                    placeholder="Seleziona eventuali extra" [disabled]="getComponentsByType('varie').length === 0"
                    name="varieList" filter="true"></p-multiSelect>
                  <small *ngIf="getComponentsByType('varie').length === 0" class="p-error">
                    Nessun componente di tipo varie disponibile
                  </small>
                </div>
              </div>

              <!-- Pulsante di conferma -->
              <div class="p-field p-col-12">
                <div class="p-grid">

                  <div class="p-col-12 p-md-4 p-text-right">


                    <!-- Cambiato per abilitare il pulsante quando almeno un componente Ã¨ selezionato -->
                    <p-button label="Applica componenti" icon="pi pi-check" (onClick)="applySpecialComponents()"
                      [disabled]="!hasSelectedComponents()" styleClass="variant-add-btn">
                    </p-button>

                  </div>
                </div>
              </div>

              <!-- Tabella componenti aggiunti alla variante -->
              <div class="p-field p-col-12" *ngIf="selectedVariant && selectedVariant.components.length > 0">
                <p-divider></p-divider>
                <h4>Componenti applicati a "{{ selectedVariant.longName }}"</h4>
                <p-table [value]="selectedVariant.components" styleClass="p-datatable-sm">
                  <ng-template pTemplate="header">
                    <tr>
                      <th>Nome</th>
                      <th>Tipo</th>
                      <th>Prezzo</th>
                      <th>QuantitÃ </th>
                    </tr>
                  </ng-template>
                  <ng-template pTemplate="body" let-component>
                    <tr>
                      <td>{{ formatComponentName(component) }}</td>
                      <td>{{ getComponentTypeDisplayName(component.type) || 'N/A' }}</td>
                      <td>{{ component.price | currency:'EUR' }}</td>
                      <td>{{ getComponentQuantity(component) }}</td>
                    </tr>
                  </ng-template>
                  <ng-template pTemplate="footer">
                    <tr>
                      <td colspan="2"><strong>Prezzo Totale:</strong></td>
                      <td colspan="2"><strong>{{ selectedVariant.price | currency:'EUR' }}</strong></td>
                    </tr>
                  </ng-template>
                </p-table>
              </div>
            </div>
          </div>
        </ng-container>

        <!-- Save product button -->
        <div class="p-field p-col-12" *ngIf="currentStep === 2">
          <p-divider></p-divider>

          <div class="p-text-center p-mt-4">
            <p-button label="Salva Prodotto" icon="pi pi-save" (onClick)="saveProduct()" [disabled]="isSavingProduct"
              [loading]="isSavingProduct" styleClass="p-button-primary">
            </p-button>

          </div>
        </div>

        <!-- Navigation buttons -->
        <div class="p-col-12">
          <p-divider class="p-mt-4"></p-divider>
          <div class="p-d-flex p-jc-between p-mt-3">
            <p-button *ngIf="currentStep > 0" label="Indietro" (onClick)="prevStep()  " styleClass="p-button-outlined"
              [disabled]="isSavingProduct || isUploading"></p-button>

            <p-button *ngIf="currentStep < steps.length - 1" label="Avanti" (onClick)="nextStep()"
              styleClass="p-button-primary" [disabled]="isSavingProduct || isUploading"
              [loading]="isUploading && currentStep === 0"></p-button>
          </div>
        </div>
      </form>
    </p-card>
  </div>

  <!-- Add Supplier Dialog -->
  <p-dialog [(visible)]="showAddSupplierDialog" header="Aggiungi Nuovo Fornitore" [modal]="true"
    [style]="{ width: '450px' }" [closable]="false">
    <div class="p-fluid">
      <div class="p-field">
        <label for="supplierName">Nome Fornitore</label>
        <input id="supplierName" type="text" pInputText [(ngModel)]="newSupplier.name" required />
        <small *ngIf="!newSupplier.name?.trim()" class="p-error">Campo obbligatorio</small>
      </div>

      <div class="p-field">
        <label for="supplierContact">Contatto</label>
        <input id="supplierContact" type="text" pInputText [(ngModel)]="newSupplier.contact" />
        <small>Email o telefono del fornitore</small>
      </div>
    </div>

    <ng-template pTemplate="footer">
      <p-button icon="pi pi-times" label="Annulla" (onClick)="cancelAddSupplier()" styleClass="p-button-text">
      </p-button>
      <p-button icon="pi pi-check" label="Salva" (onClick)="saveSupplier()" [disabled]="!newSupplier.name.trim()">
      </p-button>
    </ng-template>
  </p-dialog>

  <p-confirmDialog header="Conferma" icon="pi pi-exclamation-triangle" [closable]="false"></p-confirmDialog>

  <!-- Dialog Seduta -->
  <p-dialog header="Seduta" [(visible)]="showSedutaDialog" [modal]="true" [style]="{ width: '400px' }"
    [closable]="false">
    <div class="p-fluid">
      <div class="p-field">
        <label for="sedutaInput">Descrizione Seduta</label>
        <textarea id="sedutaInput" pInputTextarea [(ngModel)]="newSofaProduct.seduta" rows="3"
          placeholder="Inserisci la descrizione della seduta" name="sedutaDesc"></textarea>
      </div>
    </div>
    <ng-template pTemplate="footer">
      <p-button label="Salva" icon="pi pi-check" (onClick)="showSedutaDialog = false"></p-button>
    </ng-template>
  </p-dialog>

  <!-- Dialog Schienale -->
  <p-dialog header="Schienale" [(visible)]="showSchienaleDialog" [modal]="true" [style]="{ width: '400px' }"
    [closable]="false">
    <div class="p-fluid">
      <div class="p-field">
        <label for="schienaleInput">Descrizione Schienale</label>
        <textarea id="schienaleInput" pInputTextarea [(ngModel)]="newSofaProduct.schienale" rows="3"
          placeholder="Inserisci la descrizione dello schienale" name="schienaleDesc"></textarea>
      </div>
    </div>
    <ng-template pTemplate="footer">
      <p-button label="Salva" icon="pi pi-check" (onClick)="showSchienaleDialog = false"></p-button>
    </ng-template>
  </p-dialog>

  <!-- Dialog Meccanica -->
  <p-dialog header="Meccanica" [(visible)]="showMeccanicaDialog" [modal]="true" [style]="{ width: '400px' }"
    [closable]="false">
    <div class="p-fluid">
      <div class="p-field">
        <label for="meccanicaInput">Descrizione Meccanica</label>
        <textarea id="meccanicaInput" pInputTextarea [(ngModel)]="newSofaProduct.meccanica" rows="3"
          placeholder="Inserisci la descrizione della meccanica" name="meccanicaDesc"></textarea>
      </div>
    </div>
    <ng-template pTemplate="footer">
      <p-button label="Salva" icon="pi pi-check" (onClick)="showMeccanicaDialog = false"></p-button>
    </ng-template>
  </p-dialog>

  <!-- Dialog Materasso -->
  <p-dialog header="Materasso" [(visible)]="showMaterassoDialog" [modal]="true" [style]="{ width: '400px' }"
    [closable]="false">
    <div class="p-fluid">
      <div class="p-field">
        <label for="materassoInput">Descrizione Materasso</label>
        <textarea id="materassoInput" pInputTextarea [(ngModel)]="newSofaProduct.materasso" rows="3"
          placeholder="Inserisci la descrizione del materasso" name="materassoDesc"></textarea>
      </div>
    </div>
    <ng-template pTemplate="footer">
      <p-button label="Salva" icon="pi pi-check" (onClick)="showMaterassoDialog = false"></p-button>
    </ng-template>
  </p-dialog>
</div>